_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[37],{"4nOO":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/generate",function(){return n("aood")}])},KQm4:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",(function(){return c}))},aood:function(e,t,n){"use strict";n.r(t);var r=n("nKUr"),c=n("o0o1"),a=n.n(c),i=n("KQm4"),s=n("rePB"),o=n("HaE+"),l=n("q1tI"),u=n("PGnZ"),j=n.n(u),d=n("mOvS"),b=n.n(d),p=n("6EMX"),h=n("vDqi"),O=n.n(h),f=n("whbN"),m=n("7gpI"),g=n("kACj");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=b()().publicRuntimeConfig,w="http://localhost:3200/api";t.default=function(){var e=Object(l.useState)({title:"",description:"",checksum:"",kuid:"953f7at8-eba4-40rd-86uc-bf1f0dnd",category:[],details:"",cards:0,time:0,platformVersion:9.2,language:"en"}),t=e[0],n=e[1],c=Object(l.useState)("card"),u=c[0],d=c[1],b=Object(l.useState)({}),h=b[0],x=b[1],k=Object(l.useState)(null),C=k[0],N=k[1],P=Object(l.useState)({}),S=P[0],D=P[1],_=Object(l.useState)([]),A=_[0],E=_[1],T=function(){var e=Object(o.a)(a.a.mark((function e(){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.hikesData,e.next=3,Object(p.a)(r);case 3:c=e.sent,D(c[0]),n(v(v({},t),{},{category:S.categoryName})),E(Object(i.a)(c));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(e){if(d(e),"list"===e)Object(i.a)(A)},F=function(){var e=Object(o.a)(a.a.mark((function e(r){var c,i,o,l,u,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.target.files[0],x(c),(i=new FormData).append("file",c),e.next=6,O.a.post("".concat(w,"/checksum/generate"),i,{headers:{"Content-Type":"multipart/form-data"}});case 6:o=e.sent,l=o.data,u=l.checksum,j=l.tempFilePath,N(j),n(v(v({},t),{},Object(s.a)({},"checksum",u)));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(e){var r=e.target,c=r.name,a=r.value;"category"===c&&function(e){var t=A.filter((function(t){return e===t.categoryName}));D(t[0])}(a),n(v(v({},t),{},Object(s.a)({},c,a)))},K=function(){var e=Object(o.a)(a.a.mark((function e(n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),0===Object.keys(h).length&&h.constructor===Object){e.next=10;break}return r=v(v({},t),{},{tempZipFilePath:C,filename:h.name}),e.next=6,O.a.post("".concat(w,"/tour/output"),r);case 6:c=e.sent,console.log(c.data),e.next=11;break;case 10:alert("Missing tour zip file");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){return T(),function(){}}),[]),Object(r.jsxs)("div",{className:j.a.pageContainer,children:[Object(r.jsx)("h1",{children:"Add Hike/Tour"}),Object(r.jsxs)("div",{className:j.a.generate,children:[Object(r.jsx)("div",{className:j.a.generateForm,children:Object(r.jsxs)("form",{onSubmit:K,children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Upload Tour File"}),Object(r.jsx)("input",{name:"file",onChange:F,type:"file"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Generated Checksum"}),Object(r.jsx)("p",{children:t.checksum})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"KUID"}),Object(r.jsx)("input",{value:t.kuid,onChange:H,name:"kuid",placeholder:"KUID"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Language"}),Object(r.jsxs)("select",{value:t.language,onChange:H,name:"language",children:[Object(r.jsx)("option",{value:"en",children:"English"}),Object(r.jsx)("option",{value:"esp",children:"Spanish"}),Object(r.jsx)("option",{value:"nl",children:"Dutch"}),Object(r.jsx)("option",{value:"cn",children:"Chinese"})]})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Category"}),Object(r.jsx)("select",{value:t.category,onChange:H,name:"category",children:A.map((function(e){return Object(r.jsx)("option",{value:e.categoryName,children:e.categoryName})}))})]}),Object(r.jsx)("hr",{}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Title"}),Object(r.jsx)("input",{value:t.title,onChange:H,name:"title",placeholder:"Add Title"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Description"}),Object(r.jsx)("textarea",{rows:7,value:t.description,onChange:H,name:"description",placeholder:"Add Description"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Steps"}),Object(r.jsx)("input",{min:0,type:"number",value:t.cards,onChange:H,name:"cards",placeholder:"How many steps"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Time"}),Object(r.jsx)("input",{min:0,type:"number",value:t.time,onChange:H,name:"time",placeholder:"How much time"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Platform Version"}),Object(r.jsx)("input",{value:t.platformVersion,onChange:H,name:"description",label:"Description"})]}),Object(r.jsx)("button",{type:"submit",children:"Generate"})]})}),Object(r.jsxs)("div",{className:j.a.preview,children:[Object(r.jsxs)("ul",{className:j.a.previews,children:[Object(r.jsx)("li",{onClick:function(){return I("card")},children:"Card Preview"}),Object(r.jsx)("li",{onClick:function(){return I("list")},children:"List Preview"}),Object(r.jsx)("li",{onClick:function(){return I("inside")},children:"Inside Preview"})]}),Object(r.jsx)("hr",{}),"card"===u&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h3",{children:S.categoryName}),Object(r.jsx)("div",{dangerouslySetInnerHTML:{__html:S.categoryDescription}}),Object(r.jsx)(f.a,{tour:{title:t.title,description:t.description,cards:t.cards,time:"".concat(t.time," Minutes")}})]}),"list"===u&&A.map((function(e){return null!==e.categoryTours?Object(r.jsx)(m.a,{title:e.categoryName,desc:e.categoryDescription,alias:e.categoryAlias||e.categoryName,tours:e.categoryTours},e.categoryName):null})),"inside"===u&&Object(r.jsx)(g.default,{url:{asPath:"/hikes/tour/add-create-recipient"}})]})]})]})}}},[["4nOO",1,2,4,8,0,3,6,7,14,15,21,26,5]]]);